<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Boutique GEOD</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      text-align: center;
      margin: 0;
    }
    header {
      background: #111;
      color: #fff;
      padding: 20px;
    }
    main {
      margin: 20px auto;
      max-width: 500px;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    select, input, textarea {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .row {
      display: flex;
      gap: 10px;
    }
    .row .col {
      flex: 1;
    }
    #preview {
      width: 100%;
      border-radius: 10px;
      margin: 15px 0;
      display: none;
    }
    #price {
      font-size: 22px;
      font-weight: bold;
      color: black;
      text-align: center;
      margin-bottom: 10px;
    }
    .main-button {
      background: #0070ba;
      color: #fff;
      border: none;
      padding: 12px 25px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
      width: 100%;
    }
    .main-button:hover {
      background: #005a9c;
    }
    .nav-button {
      background: #555;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      margin: 5px;
      text-decoration: none;
      display: inline-block;
    }
    .nav-button:hover {
      background: #777;
    }
    .notification {
      padding: 10px;
      background: #4CAF50;
      color: white;
      border-radius: 6px;
      margin: 10px 0;
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <img src="https://i.imgur.com/1r7FmSt.png" alt="GEOD" style="height:80px;">
    <h1>Boutique GEOD</h1>
    <div style="margin-top: 10px;">
      <a href="panier.html" class="nav-button">ðŸ›’ Voir le panier</a>
    </div>
  </header>
  <main>
    <div id="notification" class="notification"></div>
    <form id="formProduit">
      <label for="type">Type</label>
      <select id="type" required>
        <option value="">-- Choisir --</option>
        <option value="Album CD">Album CD</option>
        <option value="T-shirt homme">T-shirt homme</option>
        <option value="T-shirt femme">T-shirt femme</option>
      </select>
      <label for="modele">ModÃ¨le</label>
      <select id="modele" required>
        <option value="">-- Choisir le modÃ¨le --</option>
      </select>
      <label for="taille">Taille</label>
      <select id="taille" required>
        <option value="">-- Choisir --</option>
        <option value="S">S</option>
        <option value="M">M</option>
        <option value="L">L</option>
        <option value="XL">XL</option>
      </select>
      <div id="price"></div>
      <img id="preview" src="" alt="PrÃ©visualisation">
      <button type="submit" class="main-button">ðŸ›’ Ajouter au panier</button>
    </form>
  </main>
  <script>
    const typeSelect = document.getElementById("type");
    const modeleSelect = document.getElementById("modele");
    const tailleSelect = document.getElementById("taille");
    const preview = document.getElementById("preview");
    const priceDisplay = document.getElementById("price");
    const notification = document.getElementById("notification");

    const data = {
      "T-shirt homme": {
        "GEOD couverture CD": { image: "https://i.imgur.com/ElmFdIk.jpg" },
        "Short to ground": { image: "https://i.imgur.com/5cDO1p3.jpg" },
        "Blue lady": { image: "https://i.imgur.com/eTcuvEQ.jpg" },
        "Conspiracy": { image: "https://i.imgur.com/gmlqMG4.jpg" },
        "Rattlesnake's stone": { image: "https://i.imgur.com/dMzubO6.png" },
        "More": { image: "https://i.imgur.com/yI4UWr7.jpg" }
      },
      "T-shirt femme": {
        "GEOD couverture CD": { image: "https://i.imgur.com/qRsypOr.jpg" },
        "Short to ground": { image: "https://i.imgur.com/qRsypOr.jpg" },
        "Blue lady": { image: "https://i.imgur.com/4cb4Ysa.jpg" },
        "Conspiracy": { image: "https://i.imgur.com/bzjcXWW.jpg" },
        "Rattlesnake's stone": { image: "https://i.imgur.com/USjaozL.png" },
        "More": { image: "https://i.imgur.com/swfdD2w.jpg" }
      },
      "Album CD": {
        "I.c@re": { image: "https://i.imgur.com/0hXKAro.jpeg" },
        "Ã‰trange DÃ©chu": { image: "https://i.imgur.com/V9TyjgI.jpeg" },
        "La Grande TraversÃ©e": { image: "https://i.imgur.com/BkZldI9.jpeg" },
        "Short to Ground": { image: "https://i.imgur.com/gRunQH7.jpeg" }
      }
    };

    typeSelect.addEventListener("change", () => {
      const type = typeSelect.value;
      modeleSelect.innerHTML = '<option value="">-- Choisir --</option>';
      if (!type) {
        preview.style.display = "none";
        priceDisplay.textContent = "";
        tailleSelect.disabled = (type === "Album CD");
        return;
      }
      const modeles = Object.keys(data[type]);
      modeles.forEach(m => {
        const opt = document.createElement("option");
        opt.value = m;
        opt.textContent = m;
        modeleSelect.appendChild(opt);
      });
      tailleSelect.disabled = (type === "Album CD");
    });

    modeleSelect.addEventListener("change", () => {
      const type = typeSelect.value;
      const modele = modeleSelect.value;
      if (type && modele) {
        preview.src = data[type][modele].image;
        preview.style.display = "block";
        // Calcul du prix en fonction du modÃ¨le
        let prix = 0;
        if (type === "Album CD") {
          switch (modele) {
            case "I.c@re": prix = 10; break;
            case "Ã‰trange DÃ©chu": prix = 10; break;
            case "La Grande TraversÃ©e": prix = 12; break;
            case "Short to Ground": prix = 10; break;
            default: prix = 10;
          }
        } else {
          switch (modele) {
            case "GEOD couverture CD": prix = 20; break;
            case "Short to ground": prix = 22; break;
            case "Blue lady": prix = 20; break;
            case "Conspiracy": prix = 20; break;
            case "Rattlesnake's stone": prix = 22; break;
            case "More": prix = 20; break;
            default: prix = 20;
          }
        }
        priceDisplay.textContent = `${prix} â‚¬`;
      } else {
        preview.style.display = "none";
        priceDisplay.textContent = "";
      }
    });

    document.getElementById("formProduit").addEventListener("submit", e => {
      e.preventDefault();
      const type = typeSelect.value;
      const modele = modeleSelect.value;
      const taille = tailleSelect.value;
      if (!type || !modele) {
        showNotification("Merci de choisir un type et un modÃ¨le", "error");
        return;
      }
      if (type !== "Album CD" && !taille) {
        showNotification("Merci de choisir une taille", "error");
        return;
      }
      // Calcul du prix
      let prix = 0;
      if (type === "Album CD") {
        switch (modele) {
          case "I.c@re": prix = 10; break;
          case "Ã‰trange DÃ©chu": prix = 10; break;
          case "La Grande TraversÃ©e": prix = 12; break;
          case "Short to Ground": prix = 10; break;
          default: prix = 10;
        }
      } else {
        switch (modele) {
          case "GEOD couverture CD": prix = 20; break;
          case "Short to ground": prix = 22; break;
          case "Blue lady": prix = 20; break;
          case "Conspiracy": prix = 20; break;
          case "Rattlesnake's stone": prix = 22; break;
          case "More": prix = 20; break;
          default: prix = 20;
        }
      }
      const article = {
        type,
        modele,
        taille: taille || null,
        quantite: 1,
        image: data[type][modele].image,
        prix
      };
      const panier = JSON.parse(localStorage.getItem("panier")) || [];
      const existingIndex = panier.findIndex(item =>
        item.type === type &&
        item.modele === modele &&
        item.taille === taille
      );
      if (existingIndex >= 0) {
        panier[existingIndex].quantite += 1;
      } else {
        panier.push(article);
      }
      localStorage.setItem("panier", JSON.stringify(panier));
      showNotification("âœ… Article ajoutÃ© au panier !", "success");
    });

    function showNotification(message, type) {
      notification.textContent = message;
      notification.style.display = "block";
      notification.style.background = type === "error" ? "#f44336" : "#4CAF50";
      setTimeout(() => {
        notification.style.display = "none";
      }, 3000);
    }
  </script>
</body>
</html>
